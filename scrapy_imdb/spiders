import scrapy

class ImdbSpider(scrapy.Spider):
    name = "imdb"
    allowed_domains = ["imdb.com"]

    # Örnek olarak en popüler filmler sayfası:
    start_urls = [
        "https://www.imdb.com/chart/top/"
    ]

    def parse(self, response):
        movies = response.css("tbody.lister-list tr")

        for movie in movies:
            yield {
                "title": movie.css("td.titleColumn a::text").get(),
                "year": movie.css("td.titleColumn span.secondaryInfo::text").get(),
                "rating": movie.css("td.imdbRating strong::text").get(),
                "url": "https://www.imdb.com" + movie.css("td.titleColumn a::attr(href)").get()
            }

